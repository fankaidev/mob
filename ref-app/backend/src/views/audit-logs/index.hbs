<div class="max-w-7xl mx-auto">
    <h1 class="text-2xl font-bold text-gray-900 mb-6">Audit Logs</h1>

    <!-- Filters -->
    <div class="bg-white shadow rounded-lg p-6 mb-6">
        <h2 class="text-lg font-semibold text-gray-800 mb-4">Filters</h2>
        <form hx-get="/api/htmx/audit-logs/table" hx-target="#audit-logs-container" hx-trigger="change delay:500ms, submit" hx-push-url="true">
            <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4">
                <!-- Table filter -->
                <div>
                    <label for="tableName" class="block text-sm font-medium text-gray-700 mb-1">Table</label>
                    <select id="tableName" name="tableName" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        <option value="">All tables</option>
                        {{#each tables}}
                        <option value="{{this}}" {{#if (eq ../filters.tableName this)}}selected{{/if}}>{{this}}</option>
                        {{/each}}
                    </select>
                </div>

                <!-- Action filter -->
                <div>
                    <label for="action" class="block text-sm font-medium text-gray-700 mb-1">Action</label>
                    <select id="action" name="action" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        <option value="">All actions</option>
                        <option value="INSERT" {{#if (eq filters.action 'INSERT')}}selected{{/if}}>INSERT</option>
                        <option value="UPDATE" {{#if (eq filters.action 'UPDATE')}}selected{{/if}}>UPDATE</option>
                        <option value="DELETE" {{#if (eq filters.action 'DELETE')}}selected{{/if}}>DELETE</option>
                    </select>
                </div>

                <!-- Record ID filter -->
                <div>
                    <label for="recordId" class="block text-sm font-medium text-gray-700 mb-1">Record ID</label>
                    <input type="text" id="recordId" name="recordId" value="{{filters.recordId}}" placeholder="Enter record ID" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                </div>

                <!-- Start date -->
                <div>
                    <label for="startDate" class="block text-sm font-medium text-gray-700 mb-1">Start Date</label>
                    <input type="datetime-local" id="startDate" name="startDate" value="{{filters.startDate}}" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                </div>

                <!-- End date -->
                <div>
                    <label for="endDate" class="block text-sm font-medium text-gray-700 mb-1">End Date</label>
                    <input type="datetime-local" id="endDate" name="endDate" value="{{filters.endDate}}" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 mt-4">
                <!-- User ID filter -->
                <div>
                    <label for="userId" class="block text-sm font-medium text-gray-700 mb-1">User ID</label>
                    <input type="text" id="userId" name="userId" value="{{filters.userId}}" placeholder="Enter user ID" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                </div>

                <!-- Trace ID filter -->
                <div>
                    <label for="traceId" class="block text-sm font-medium text-gray-700 mb-1">Trace ID</label>
                    <input type="text" id="traceId" name="traceId" value="{{filters.traceId}}" placeholder="Enter trace ID" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                </div>
            </div>

            <div class="flex gap-2 mt-4">
                <button type="submit" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                    Apply Filters
                </button>
                <a href="/api/htmx/audit-logs" class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                    Clear
                </a>
            </div>
        </form>
    </div>

    <!-- Results Container -->
    {{> audit-logs/_table }}
</div>
